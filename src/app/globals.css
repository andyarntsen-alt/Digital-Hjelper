@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --font-size-base: 1.25rem;
  --font-size-lg: 1.5rem;
  --font-size-xl: 2rem;
  --font-size-xxl: 2.5rem;
  /* Safe area insets for iPhone notch/home indicator */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
}

html {
  font-size: var(--font-size-base);
}

html.large-text {
  font-size: 1.5rem;
}

html.extra-large-text {
  font-size: 1.75rem;
}

/* High contrast mode - mer spesifikke regler for produksjon */
html.high-contrast,
html.high-contrast body {
  background-color: #000 !important;
  color: #fff !important;
}

html.high-contrast * {
  border-color: #fff !important;
}

html.high-contrast .card,
html.high-contrast .bg-white,
html.high-contrast [class*="bg-white"],
html.high-contrast [class*="bg-gray-"],
html.high-contrast [class*="bg-blue-50"],
html.high-contrast [class*="bg-green-50"],
html.high-contrast [class*="bg-yellow-50"],
html.high-contrast [class*="bg-amber-50"] {
  background-color: #1a1a1a !important;
  color: #fff !important;
  border: 2px solid #fff !important;
}

html.high-contrast header,
html.high-contrast footer,
html.high-contrast nav {
  background-color: #000 !important;
  border-color: #fff !important;
}

html.high-contrast a,
html.high-contrast button {
  color: #ffff00 !important;
  text-decoration: underline !important;
  font-weight: bold !important;
}

html.high-contrast a:hover,
html.high-contrast button:hover {
  color: #000 !important;
  background-color: #ffff00 !important;
}

html.high-contrast a:focus,
html.high-contrast button:focus {
  outline: 3px solid #ffff00 !important;
  outline-offset: 2px !important;
}

html.high-contrast .text-gray-600,
html.high-contrast .text-gray-700,
html.high-contrast .text-gray-800,
html.high-contrast [class*="text-gray-"] {
  color: #fff !important;
}

html.high-contrast .text-nav-blue,
html.high-contrast .text-skatt-green,
html.high-contrast .text-helse-red,
html.high-contrast [class*="text-blue-"],
html.high-contrast [class*="text-green-"],
html.high-contrast [class*="text-red-"] {
  color: #ffff00 !important;
}

html.high-contrast .bg-nav-blue,
html.high-contrast .bg-skatt-green,
html.high-contrast .bg-helse-red,
html.high-contrast [class*="bg-nav-"],
html.high-contrast [class*="bg-skatt-"],
html.high-contrast [class*="bg-helse-"],
html.high-contrast [class*="bg-purple-"],
html.high-contrast [class*="bg-orange-"],
html.high-contrast [class*="bg-teal-"],
html.high-contrast [class*="bg-indigo-"],
html.high-contrast [class*="bg-cyan-"],
html.high-contrast [class*="bg-rose-"] {
  background-color: #333 !important;
  color: #fff !important;
  border: 2px solid #fff !important;
}

html.high-contrast input,
html.high-contrast select,
html.high-contrast textarea {
  background-color: #1a1a1a !important;
  color: #fff !important;
  border: 2px solid #fff !important;
}

html.high-contrast input::placeholder {
  color: #aaa !important;
}

html.high-contrast .shadow-lg,
html.high-contrast .shadow-md,
html.high-contrast .shadow-xl,
html.high-contrast .shadow-2xl {
  box-shadow: 0 0 0 2px #fff !important;
}

html.high-contrast .tip-box {
  background-color: #1a3a1a !important;
  border-left-color: #00ff00 !important;
}

html.high-contrast .warning-box {
  background-color: #3a3a1a !important;
  border-left-color: #ffff00 !important;
}

html.high-contrast .skip-link {
  background: #ffff00 !important;
  color: #000 !important;
}

@layer base {
  body {
    @apply text-gray-800 leading-relaxed;
  }

  h1, h2, h3 {
    @apply font-bold leading-tight;
  }

  a {
    @apply text-nav-blue underline hover:text-nav-dark focus:outline-none focus:ring-4 focus:ring-yellow-400;
  }

  button {
    @apply focus:outline-none focus:ring-4 focus:ring-yellow-400;
  }
}

@layer components {
  .btn-primary {
    @apply bg-nav-blue text-white px-5 sm:px-8 py-3 sm:py-4 rounded-lg text-base sm:text-lg font-semibold
           hover:bg-nav-dark active:bg-nav-dark transition-colors duration-200
           focus:outline-none focus:ring-4 focus:ring-yellow-400;
  }

  .btn-secondary {
    @apply bg-white text-nav-blue border-2 border-nav-blue px-5 sm:px-8 py-3 sm:py-4 rounded-lg text-base sm:text-lg font-semibold
           hover:bg-blue-50 active:bg-blue-100 transition-colors duration-200
           focus:outline-none focus:ring-4 focus:ring-yellow-400;
  }

  .card {
    @apply bg-white rounded-lg sm:rounded-xl shadow-lg p-4 sm:p-6 md:p-8 border border-gray-200;
  }

  .service-card {
    @apply card hover:shadow-xl transition-shadow duration-200 cursor-pointer;
  }

  .step-card {
    @apply bg-blue-50 rounded-lg sm:rounded-xl p-4 sm:p-6 border-l-4 border-nav-blue;
  }

  .warning-box {
    @apply bg-yellow-50 border-l-4 border-yellow-500 p-3 sm:p-4 rounded-r-lg;
  }

  .tip-box {
    @apply bg-green-50 border-l-4 border-green-500 p-3 sm:p-4 rounded-r-lg;
  }
}

/* Ekstra god fokus-synlighet for tilgjengelighet */
*:focus {
  outline: 3px solid #fbbf24;
  outline-offset: 2px;
}

/* Minimum touch target størrelse for tilgjengelighet (WCAG 2.5.5) */
button,
a,
[role="button"],
input[type="checkbox"],
input[type="radio"],
select {
  min-height: 44px;
  min-width: 44px;
}

/* Safe area utility classes for iPhone notch/home indicator */
.safe-area-top {
  padding-top: var(--safe-area-inset-top);
}

.safe-area-bottom {
  padding-bottom: var(--safe-area-inset-bottom);
}

.safe-area-left {
  padding-left: var(--safe-area-inset-left);
}

.safe-area-right {
  padding-right: var(--safe-area-inset-right);
}

/* Forbedret touch-feedback for mobil */
@media (hover: none) and (pointer: coarse) {
  /* Fjern hover-effekter på touch-enheter for bedre ytelse */
  .hover\:bg-gray-100:active,
  .hover\:bg-gray-50:active {
    background-color: rgb(243 244 246);
  }

  /* Legg til aktiv state for touch */
  button:active,
  a:active,
  [role="button"]:active {
    transform: scale(0.98);
  }
}

/* Forbedret scroll-oppførsel */
.overscroll-contain {
  overscroll-behavior: contain;
}

/* Forhindre tekstseleksjon ved dobbelt-trykk på mobil */
@media (hover: none) and (pointer: coarse) {
  button,
  [role="button"],
  nav a {
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }
}

/* Sørg for at inputs ikke zoomer på iOS */
@media screen and (max-width: 768px) {
  input[type="text"],
  input[type="email"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  input[type="password"],
  textarea,
  select {
    font-size: 16px !important;
  }
}

/* Respekter brukernes motion-preferanser */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Skip link for tastaturnavigasjon */
.skip-link {
  position: fixed;
  top: -100%;
  left: 50%;
  transform: translateX(-50%);
  background: #1e40af;
  color: #fff;
  padding: 12px 24px;
  z-index: 9999;
  border-radius: 0 0 8px 8px;
  font-weight: 600;
  text-decoration: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  transition: top 0.2s ease-in-out;
}

.skip-link:focus {
  top: 0;
  outline: 3px solid #fbbf24;
  outline-offset: 2px;
}

/* Utskriftsvennlig styling */
@media print {
  /* Skjul navigasjon og andre UI-elementer */
  header,
  footer,
  .skip-link,
  .accessibility-toolbar,
  button:not(.print-show),
  nav[aria-label="Brødsmulesti"],
  .print\\:hidden {
    display: none !important;
  }

  /* Generell styling */
  body {
    font-size: 12pt !important;
    line-height: 1.5 !important;
    color: #000 !important;
    background: #fff !important;
  }

  /* Fjern bakgrunnsfarger og skygger */
  * {
    background: transparent !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* Behold viktige farger for lesbarhet */
  .card,
  .step-card,
  .tip-box,
  .warning-box {
    border: 1px solid #ccc !important;
    padding: 12px !important;
    margin-bottom: 12px !important;
    page-break-inside: avoid;
  }

  .tip-box {
    border-left: 4px solid #22c55e !important;
  }

  .warning-box {
    border-left: 4px solid #f59e0b !important;
  }

  /* Lenker - vis URL */
  a[href^="http"]:after {
    content: " (" attr(href) ")";
    font-size: 10pt;
    color: #666;
  }

  a {
    color: #000 !important;
    text-decoration: underline !important;
  }

  /* Overskrifter */
  h1 {
    font-size: 24pt !important;
    margin-bottom: 16px !important;
  }

  h2 {
    font-size: 18pt !important;
    margin-top: 24px !important;
    margin-bottom: 12px !important;
  }

  h3 {
    font-size: 14pt !important;
    margin-top: 16px !important;
    margin-bottom: 8px !important;
  }

  /* Unngå sideskift midt i innhold */
  h1, h2, h3, h4 {
    page-break-after: avoid;
  }

  p, li {
    orphans: 3;
    widows: 3;
  }

  /* Vis elementer som skal være synlige ved utskrift */
  .print\\:block {
    display: block !important;
  }

  /* Steg-guider */
  .step-card {
    border-left: 4px solid #1e40af !important;
  }

  /* Maksimer bredde */
  .max-w-4xl,
  .max-w-6xl {
    max-width: 100% !important;
  }

  /* Padding for utskrift */
  @page {
    margin: 2cm;
  }
}
